# icmp
Для начала о задаче, которая стояла:  разработать систему для мониторинга состояния сетевых
устройств (например, роутеров или свитчей).

Функциональные Требования:
• Перед началом мониторинга, система должна подключиться к каждому устройству и настроить его так, чтобы устройство стало доступным для ICMP пинга.
• Система должна опрашивать состояние устройств через ICMP (ping).
• Результаты опроса должны записываться в лог-файл, содержащий информацию о времени опроса, IP-адресе устройства и результате опроса.
• В случае, если устройство не отвечает более N раз, система должна отправлять уведомления администратору на почтовый ящик.
• На вход системе подается YAML файл, содержащий:
• Список устройств и данные для их подключения.
• Путь к файлу для логирования.
• Почтовый ящик для отправки уведомлений.
• Количество неудачных попыток подключения, после которых следует отправить уведомление.


Теперь о самом коде:

файл main.py:

Этот Python-скрипт предназначен для мониторинга сетевых устройств. Он включает в себя классы и функции для конфигурации устройств, проверки их доступности с помощью ICMP пингов, логирования событий, отправки уведомлений по электронной почте в случае недоступности устройства, и чтения конфигурационных данных из YAML-файла. Вот основные компоненты кода:

Класс Device:
Представляет сетевое устройство с IP-адресом, именем пользователя и паролем.
Имеет метод configure_device для настройки устройства через SSH и его подготовки к ответам на ICMP-запросы.

Класс DeviceManager:
Управляет группой устройств (Device объектов).
Проверяет доступность каждого устройства с помощью ICMP пингов.
Если устройство не отвечает определенное количество раз (max_failures), использует NotificationManager для отправки уведомления.

Класс ICMPMonitor:
Отвечает за мониторинг доступности отдельного устройства с помощью ICMP пинга.

Класс NotificationManager:
Управляет процессом отправки уведомлений по электронной почте, если устройство недоступно.

Класс Logger:
Логирует различные уровни сообщений (информация, предупреждения, ошибки) в файл лога.

Класс MailSender:
Отправляет электронные письма через SMTP сервер.

Класс ConfigLoader:
Загружает конфигурационные данные из YAML файла.

Функция main:
Точка входа скрипта.
Загружает конфигурацию, инициализирует логгер и создает объекты для устройств и менеджера уведомлений.
Выполняет циклическую проверку доступности устройств и конфигурацию устройств в начале.
В процессе работы скрипта, если устройство не отвечает на пинг определенное количество раз (указанное в конфигурации), система отправит уведомление. 

Код включает обработку исключений для обработки ошибок подключения SSH, аутентификации, ошибок ICMP и других неожиданных ситуаций. Сообщения об этих событиях логируются и записываются в лог-файл.







